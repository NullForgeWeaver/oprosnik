# agent.md

Руководство для ИИ‑агентов и разработчиков, работающих с репозиторием «Oprosnik Helper».

## Зачем нужен этот файл
Этот документ стандартизирует поведение агентов (и людей), чтобы изменения были безопасными, воспроизводимыми и согласованными. Ранее такого файла не было — вместо него использовался `CLAUDE.md` (ориентирован на Claude Code). Теперь `agent.md` служит нейтральной инструкцией для любых агентов.

## Кратко о проекте
- Тип проекта: расширение браузера (Chrome, Manifest V3)
- Назначение: упрощает заполнение опросов, извлекая данные из Cisco Finesse и подставляя их в CTP
- Версия: 4.0.0
- Языки/стек: JS/TS, React (только для popup), Webpack

Подробности архитектуры и потоков данных см. в `CLAUDE.md`.

## Где лежит исходный код
- Исходники: `oprosnik-extension/*`
- Сборка/артефакты: `dist/*` (генерируется, редактировать вручную не нужно)

Важно: правки вносите в исходники, затем собирайте проект — артефакты появятся в `dist`.

## Локальная разработка и сборка
- Development (watch):
  - `npm run dev`
- Production build:
  - `npm run build`
- Проверка типов:
  - `npm run type-check`

Проект не использует отдельный тест‑раннер и ESLint. Минимальная проверка качества — успешная типизация (`type-check`) и сборка (`build`).

## Ручное тестирование расширения
1. Соберите проект: `npm run build` (папка `dist` должна существовать).
2. В Chrome откройте: `chrome://extensions` → включите «Режим разработчика».
3. Нажмите «Загрузить распакованное» и выберите папку `dist`.
4. Проверьте:
   - На странице Finesse появляется индикатор активности парсера.
   - На страницах CTP доступны модификации формы и кнопка «Вставить данные о звонке».
   - История звонков и вставка данных работают по описанию в `CLAUDE.md`.

## Политика правок и PR
- Всегда работайте в ветке фичи (например, `docs/add-agent-md`).
- Любые изменения доставляйте через Pull Request в `main`.
- Перед коммитом убедитесь, что:
  - `npm run type-check` проходит без ошибок;
  - `npm run build` успешен;
  - вы не редактировали файлы в `dist` вручную.

Рекомендуемый формат сообщений коммита: Conventional Commits, например `feat: ...`, `fix: ...`, `docs: ...`.

## Безопасность и данные
- Не добавляйте секреты, токены и персональные данные в репозиторий.
- Проверяйте диффы перед пушем; артефакты сборки не должны содержать чувствительные данные.

## Чек‑лист для агента
- [ ] Обновить локальный репозиторий (`git pull --ff-only`).
- [ ] Создать ветку фичи.
- [ ] Внести правки в `oprosnik-extension/*` (или документацию).
- [ ] Запустить `npm run type-check` и `npm run build`.
- [ ] Самостоятельно протестировать расширение в Chrome.
- [ ] Закоммитить и запушить ветку, открыть PR.

## Полезные ссылки/файлы
- `CLAUDE.md` — детальное описание архитектуры и точек интеграции.
- `oprosnik-extension/manifest.json` — разрешения и точки входа.
- `webpack.config.js` — правила сборки и копирования в `dist`.
